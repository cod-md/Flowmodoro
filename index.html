<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pomodoro Timer</title>
<style>
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

body {
font-family: 'Arial', sans-serif;
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
min-height: 100vh;
display: flex;
justify-content: center;
align-items: center;
color: white;
}

.container {
background: rgba(255, 255, 255, 0.1);
backdrop-filter: blur(10px);
border-radius: 20px;
padding: 40px;
text-align: center;
box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
border: 1px solid rgba(255, 255, 255, 0.2);
max-width: 500px;
width: 90%;
}

h1 {
font-size: 2.5rem;
margin-bottom: 30px;
text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
}

.timer-display {
font-size: 4rem;
font-weight: bold;
margin: 30px 0;
text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
font-family: 'Courier New', monospace;
transition: all 0.3s ease;
}

.study-timer {
color: #ff6b6b;
text-shadow: 0 0 20px rgba(255, 107, 107, 0.5);
}

.break-timer {
color: #4ecdc4;
text-shadow: 0 0 20px rgba(78, 205, 196, 0.5);
}

.session-type {
font-size: 1.5rem;
margin-bottom: 20px;
padding: 10px 20px;
border-radius: 25px;
display: inline-block;
font-weight: bold;
}

.study-session {
background: rgba(255, 99, 71, 0.8);
}

.break-session {
background: rgba(50, 205, 50, 0.8);
}

.controls {
margin: 30px 0;
}

.settings {
display: grid;
grid-template-columns: 1fr 1fr;
gap: 20px;
margin: 30px 0;
}

.setting-group {
background: rgba(255, 255, 255, 0.1);
border-radius: 15px;
padding: 20px;
border: 1px solid rgba(255, 255, 255, 0.2);
}

.setting-group h3 {
margin-bottom: 15px;
font-size: 1.1rem;
}
        

.setting-control-wrapper {
display: flex;
align-items: center;
justify-content: space-between;
gap: 15px;
}

.time-input {
display: flex;
align-items: center;
justify-content: center;
gap: 10px;
margin: 10px 0;
flex-grow: 1;
}

input[type="range"] {
width: 100px;
height: 6px;
border-radius: 3px;
background: rgba(255, 255, 255, 0.3);
outline: none;
-webkit-appearance: none;
}

input[type="range"]::-webkit-slider-thumb {
-webkit-appearance: none;
appearance: none;
width: 20px;
height: 20px;
border-radius: 50%;
background: white;
cursor: pointer;
box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
}

input[type="range"]::-moz-range-thumb {
width: 20px;
height: 20px;
border-radius: 50%;
background: white;
cursor: pointer;
border: none;
box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
}

.time-value {
font-weight: bold;
min-width: 40px;
}

button {
background: rgba(255, 255, 255, 0.2);
border: 2px solid rgba(255, 255, 255, 0.3);
color: white;
padding: 15px 30px;
font-size: 1.1rem;
border-radius: 25px;
cursor: pointer;
margin: 10px;
transition: all 0.3s ease;
font-weight: bold;
}

button:hover {
background: rgba(255, 255, 255, 0.3);
transform: translateY(-2px);
box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

button:active {
transform: translateY(0);
}

.save-btn {
padding: 8px 15px;
font-size: 0.9rem;
font-weight: normal;
border-radius: 20px;
margin: 0;
flex-shrink: 0;
background: rgba(255, 255, 255, 0.15);
border-width: 1px;
}

.save-btn:hover {
background: rgba(255, 255, 255, 0.25);
transform: translateY(-1px);
box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

.start-btn {
background: rgba(50, 205, 50, 0.6);
border-color: rgba(50, 205, 50, 0.8);
}

.pause-btn {
background: rgba(255, 165, 0, 0.6);
border-color: rgba(255, 165, 0, 0.8);
}

.reset-btn {
background: rgba(255, 99, 71, 0.6);
border-color: rgba(255, 99, 71, 0.8);
}

.stats {
margin-top: 30px;
background: rgba(255, 255, 255, 0.1);
border-radius: 15px;
padding: 20px;
border: 1px solid rgba(255, 255, 255, 0.2);
}

.stats h3 {
margin-bottom: 10px;
}

.progress-bar {
width: 100%;
height: 8px;
background: rgba(255, 255, 255, 0.2);
border-radius: 4px;
overflow: hidden;
margin: 20px 0;
}

.progress-fill {
height: 100%;
background: linear-gradient(90deg, #ff6b6b, #4ecdc4);
border-radius: 4px;
transition: width 0.1s ease;
}

.auto-start-indicator {
font-size: 0.9rem;
color: rgba(255, 255, 255, 0.8);
margin-top: 10px;
min-height: 20px;
}

@media (max-width: 600px) {
.container {
padding: 20px;
}

.timer-display {
font-size: 3rem;
}

.settings {
grid-template-columns: 1fr;
}

h1 {
font-size: 2rem;
}
}
</style>
</head>
<body>
<div class="container">
<h1>üçÖ Pomodoro Timer</h1>

<div class="session-type" id="sessionType">Study Session</div>
<div class="timer-display" id="timerDisplay">25:00</div>
<div class="auto-start-indicator" id="autoStartIndicator"></div>

<div class="progress-bar">
<div class="progress-fill" id="progressFill"></div>
</div>

<div class="controls">
<button class="start-btn" id="startBtn" onclick="toggleTimer()">Start</button>
<button class="reset-btn" id="resetBtn" onclick="resetTimer()">Reset</button>
</div>

<div class="settings">
<div class="setting-group">
<h3>Study Time</h3>
<div class="setting-control-wrapper">
<div class="time-input">
<input type="range" id="studySlider" min="1" max="60" value="25" oninput="updateStudyTime()">
<span class="time-value" id="studyValue">25min</span>
</div>
<button id="saveStudyBtn" class="save-btn" onclick="saveDefault('study')">Save</button>
</div>
</div>
<div class="setting-group">
<h3>Break Time</h3>
<div class="setting-control-wrapper">
<div class="time-input">
<input type="range" id="breakSlider" min="1" max="15" value="5" oninput="updateBreakTime()">
<span class="time-value" id="breakValue">5min</span>
</div>
<button id="saveBreakBtn" class="save-btn" onclick="saveDefault('break')">Save</button>
</div>
</div>
</div>

<div class="stats">
<h3>Session Stats</h3>
<p>Completed Sessions: <span id="completedSessions">0</span></p>
<p>Total Study Time: <span id="totalStudyTime">0m</span></p>
</div>
</div>

<script>
let timer = null;
let autoStartTimer = null;
let isRunning = false;
let isStudySession = true;
let timeLeft = 0;
let studyDuration = 25 * 60;
let breakDuration = 5 * 60;
let totalTimeForSession = 0;
let completedSessions = 0;
let totalStudyTime = 0;

const audioContext = new (window.AudioContext || window.webkitAudioContext)();

function loadDefaultsAndInit() {
const defaultStudy = parseInt(localStorage.getItem('defaultStudyTime') || '25');
const defaultBreak = parseInt(localStorage.getItem('defaultBreakTime') || '5');

document.getElementById('studySlider').value = defaultStudy;
document.getElementById('studyValue').textContent = `${defaultStudy}min`;

document.getElementById('breakSlider').value = defaultBreak;
document.getElementById('breakValue').textContent = `${defaultBreak}min`;

studyDuration = defaultStudy * 60;
breakDuration = defaultBreak * 60;
timeLeft = studyDuration;
totalTimeForSession = studyDuration;

updateDisplay();
}

function saveDefault(type) {
const isStudy = type === 'study';
const sliderId = isStudy ? 'studySlider' : 'breakSlider';
const storageKey = isStudy ? 'defaultStudyTime' : 'defaultBreakTime';
const buttonId = isStudy ? 'saveStudyBtn' : 'saveBreakBtn';

const value = document.getElementById(sliderId).value;
localStorage.setItem(storageKey, value);

const btn = document.getElementById(buttonId);
btn.textContent = 'Saved!';
setTimeout(() => { btn.textContent = 'Save'; }, 1500);
}

function createBeep(frequency, duration, type = 'sine') {
const oscillator = audioContext.createOscillator();
const gainNode = audioContext.createGain();

oscillator.connect(gainNode);
gainNode.connect(audioContext.destination);

oscillator.frequency.value = frequency;
oscillator.type = type;

gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);

oscillator.start(audioContext.currentTime);
oscillator.stop(audioContext.currentTime + duration);
}

function playStudyEndSound() {
createBeep(800, 0.2);
setTimeout(() => createBeep(800, 0.2), 300);
}

function playBreakEndSound() {
createBeep(600, 0.15);
setTimeout(() => createBeep(700, 0.15), 200);
setTimeout(() => createBeep(800, 0.2), 400);
}

function formatTime(seconds) {
const mins = Math.floor(seconds / 60);
const secs = seconds % 60;
return `${mins}:${secs.toString().padStart(2, '0')}`;
}

function updateDisplay() {
document.getElementById('timerDisplay').textContent = formatTime(timeLeft);

const sessionTypeEl = document.getElementById('sessionType');
const timerDisplayEl = document.getElementById('timerDisplay');

if (isStudySession) {
sessionTypeEl.textContent = 'Study Session';
sessionTypeEl.className = 'session-type study-session';
timerDisplayEl.className = 'timer-display study-timer';
} else {
sessionTypeEl.textContent = 'Break Time';
sessionTypeEl.className = 'session-type break-session';
timerDisplayEl.className = 'timer-display break-timer';
}

const progress = totalTimeForSession > 0 ? ((totalTimeForSession - timeLeft) / totalTimeForSession) * 100 : 0;
const progressFill = document.getElementById('progressFill');
progressFill.style.width = `${progress}%`;

if (isStudySession) {
progressFill.style.background = 'linear-gradient(90deg, #ff6b6b, #ff8e8e)';
} else {
progressFill.style.background = 'linear-gradient(90deg, #4ecdc4, #7ed6cc)';
}

document.title = `${formatTime(timeLeft)} - ${isStudySession ? 'Study' : 'Break'} | Pomodoro Timer`;
}

function updateStudyTime() {
const value = parseInt(document.getElementById('studySlider').value);
studyDuration = value * 60;
document.getElementById('studyValue').textContent = `${value}min`;

if (!isRunning && isStudySession) {
timeLeft = studyDuration;
totalTimeForSession = studyDuration;
updateDisplay();
}
}

function updateBreakTime() {
const value = parseInt(document.getElementById('breakSlider').value);
breakDuration = value * 60;
document.getElementById('breakValue').textContent = `${value}min`;

if (!isRunning && !isStudySession) {
timeLeft = breakDuration;
totalTimeForSession = breakDuration;
updateDisplay();
}
}

function toggleTimer() {
if (isRunning) {
pauseTimer();
} else {
startTimer();
}
}

function startTimer() {
// Clear any auto-start timer
if (autoStartTimer) {
clearInterval(autoStartTimer);
autoStartTimer = null;
}
document.getElementById('autoStartIndicator').textContent = '';

if (audioContext.state === 'suspended') {
audioContext.resume();
}

isRunning = true;
document.getElementById('startBtn').textContent = 'Pause';
document.getElementById('startBtn').className = 'pause-btn';

timer = setInterval(() => {
timeLeft--;
updateDisplay();

if (timeLeft <= 0) {
completeSession();
}
}, 1000);
}

function pauseTimer() {
isRunning = false;
if (timer) {
clearInterval(timer);
timer = null;
}
document.getElementById('startBtn').textContent = 'Resume';
document.getElementById('startBtn').className = 'start-btn';
}

function resetTimer() {
// Clear all timers
if (timer) {
clearInterval(timer);
timer = null;
}
if (autoStartTimer) {
clearInterval(autoStartTimer);
autoStartTimer = null;
}

isRunning = false;
document.getElementById('autoStartIndicator').textContent = '';

if (isStudySession) {
timeLeft = studyDuration;
totalTimeForSession = studyDuration;
} else {
timeLeft = breakDuration;
totalTimeForSession = breakDuration;
}

document.getElementById('startBtn').textContent = 'Start';
document.getElementById('startBtn').className = 'start-btn';
updateDisplay();
}

function completeSession() {
// Clear the main timer first
if (timer) {
clearInterval(timer);
timer = null;
}
isRunning = false;

if (isStudySession) {
playStudyEndSound();
completedSessions++;
totalStudyTime += Math.floor(studyDuration / 60);

// Switch to break session
isStudySession = false;
timeLeft = breakDuration;
totalTimeForSession = breakDuration;

if (Notification.permission === 'granted') {
new Notification('Study session complete!', {
body: 'Time for a break! üéâ',
icon: 'üçÖ'
});
}
} else {
playBreakEndSound();

// Switch to study session
isStudySession = true;
timeLeft = studyDuration;
totalTimeForSession = studyDuration;

if (Notification.permission === 'granted') {
new Notification('Break time over!', {
body: 'Ready to focus again? üí™',
icon: 'üìö'
});
}
}

// Update stats
document.getElementById('completedSessions').textContent = completedSessions;
document.getElementById('totalStudyTime').textContent = `${totalStudyTime}m`;

// Reset button state
document.getElementById('startBtn').textContent = 'Start';
document.getElementById('startBtn').className = 'start-btn';

// Update display immediately
updateDisplay();

// Start auto-start countdown
let countdown = 3;
document.getElementById('autoStartIndicator').textContent = `Auto-starting in ${countdown}s...`;

autoStartTimer = setInterval(() => {
countdown--;
if (countdown > 0) {
document.getElementById('autoStartIndicator').textContent = `Auto-starting in ${countdown}s...`;
} else {
// Clear the auto-start timer
clearInterval(autoStartTimer);
autoStartTimer = null;
document.getElementById('autoStartIndicator').textContent = '';

// Start the timer if not already running
if (!isRunning) {
startTimer();
}
}
}, 1000);
}

if ('Notification' in window && Notification.permission === 'default') {
Notification.requestPermission();
}

// Initialize timer with defaults
loadDefaultsAndInit();

window.addEventListener('beforeunload', (e) => {
if (isRunning) {
e.preventDefault();
e.returnValue = 'Timer is running. Are you sure you want to leave?';
return e.returnValue;
}
});
</script>
</body>
</html>
